#!/bin/bash

S_LIB_FOLDER=${S_LIB_FOLDER:-/usr/lib/ws-session}
if ! source $S_LIB_FOLDER/core/source.sh 2>/dev/null; then
  echo "FATAL: cannot find core/source.sh, aborting!"
  echo "       Install core files to /usr/lib/ws-cmd"
  echo "       or export S_LIB_FOLDER,"
  echo "       or temporary use: S_LIB_FOLDER=. ws-cmd"
  exit 1
fi

s_source_lib wm

if [[ -z "$@" ]] ; then
cat << WSCMDHELP
Usage:
  ws-cmd terminal command "with quoted argument"
  Be shure that you cannot lose your work when the termial window gets termiated.

Example:
  ws-cmd htop
  ws-cmd mutt
  ws-cmd man archlinux
  ws-cmd ncmpcpp -h 10.0.0.5
  ws-cmd ssh -l user 10.0.0.5 "tmux attach"
WSCMDHELP
exit 0
fi

if ! which $1 >/dev/null 2>&1;then 
  s_fatal "'$1' not found" \
    "If '$1' is really a command you want to install it, or use absolute path"
fi

if [[ -n $S_WM ]] ; then
  s_source app/command.sh
  s_command_start "$@"
else
  $@
fi

# vim: ft=sh ts=2 et sw=2:
